<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>READYgg Guest and OAuth Login Example</title>
    <script src="script.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/json-formatter-js/dist/json-formatter.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/json-formatter-js"></script>
  </head>
  <body>
    <div id="toaster-container"></div>

    <div class="loader" id="loader"></div>
    <div class="container">
      <div id="step_1">
        <h1>READYgg Guest and OAuth Example</h1>
        <!-- <p class="explanation">
          Start by signing up anonymously to obtain a guest ID, ID Token, and
          Refresh Token. These credentials allow you to interact with the API as
          a guest user. Next, you can proceed with the OAuth login, which uses
          the acquired ID Token to merge the guest account with a formal
          account. This process is crucial for seamless account integration and
          merging.
        </p> -->

        <ul class="explanation">
          <h2>User Authentication Instructions:</h2>
          <ol>
            <li>
              When you first visit the website and no token is found, a sign up
              is done anonymously. This will return tokens that will be saved
              locally.
            </li>
            <li>
              If you've logged in before, request new refreshTokens and replace
              the saved one.
            </li>
            <li>Once you're logged in, you can start using the Readygg API.</li>
          </ol>
        </ul>

        <!-- sign up anonymously:start -->
        <div class="container-inner">
          <button onclick="signUpAnonymously()">Sign Up Anonymously</button>
          <div id="guestResponse" style="display: none">
            <p>User ID: <span id="guestUserId"></span></p>
            <p class="token-label">ID Token:</p>
            <div class="code-block">
              <span id="guestIdToken"></span>
              <i
                class="fas fa-copy copy-icon"
                onclick="copyToClipboard('guestIdToken')"
              ></i>
            </div>
            <p class="token-label">Refresh Token:</p>
            <div class="code-block">
              <span id="guestRefreshToken"></span>
              <i
                class="fas fa-copy copy-icon"
                onclick="copyToClipboard('guestRefreshToken')"
              ></i>
            </div>
          </div>
        </div>
      </div>
      <!-- sign up anonymously:end -->

      <!--virtual items:start -->
      <div class="container-inner" id="virtualItems" style="display: none">
        <div>
          <h2 id="campaign-title">Virtual Items</h2>
          <h3 class="offer-end">
            Offer ending in <span id="campaign-end"></span>
          </h3>
          <h4>New registrations get to choose one of these free gifts!</h4>

          <ul class="explanation">
            <h2>How to Use Our API:</h2>
            <ol>
              <li>Check if there's a special offer available.</li>
              <li>If there is, check if the user has already claimed it.</li>
              <li>If not, show the available virtual items.</li>
              <li>
                Let the user choose an item and buy it using the 'Claim' button.
              </li>
            </ol>
          </ul>
          <div id="virtual-items" class="virtual-items-block">
            <div>
              <img id="item-img-1" alt="no image found" src="" />
              <p>
                <button onclick="claimItem(1)">Claim Virtual Item</button>
              </p>
            </div>
            <div>
              <img id="item-img-2" alt="no image found" src="" />
              <p>
                <button onclick="claimItem(2)">Claim Virtual Item</button>
              </p>
            </div>
          </div>
        </div>

        <div id="offer-message" class="offer-message"></div>

        <div id="response-inventory" style="display: none">
          <p class="token-label">Inventory:</p>
          <div class="code-block">
            <span hidden id="inventory-success-raw"></span>
            <span id="inventory-success-response"></span>
            <i
              class="fas fa-copy copy-icon"
              onclick="copyToClipboard('inventory-success-raw')"
            ></i>
          </div>
        </div>
      </div>
      <!--virtual items:end -->
    </div>
  </body>
</html>
